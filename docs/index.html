<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>alookr vignettes: Introduce alookr</title>

  <meta property="description" itemprop="description" content="Introduce alookr package for data cleansing, spliting and modeling"/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-11-30"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-11-30"/>
  <meta name="article:author" content="Choonghyun Ryu"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="alookr vignettes: Introduce alookr"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Introduce alookr package for data cleansing, spliting and modeling"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="alookr vignettes"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="alookr vignettes: Introduce alookr"/>
  <meta property="twitter:description" content="Introduce alookr package for data cleansing, spliting and modeling"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","site","output","author","date"]}},"value":[{"type":"character","attributes":{},"value":["Introduce alookr"]},{"type":"character","attributes":{},"value":["Introduce alookr package for data cleansing, spliting and modeling\n"]},{"type":"character","attributes":{},"value":["distill::distill_website"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Choonghyun Ryu"]},{"type":"character","attributes":{},"value":["https://dataholic.netlify.app/"]}]}]},{"type":"character","attributes":{},"value":["2021-11-30"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */

  :root {
    --custom-grey60: rgb(102, 102, 102);
    --custom-grey20: rgb(204, 204, 204);
    --custom-grey10: rgb(230, 230, 230);
    --custom-blue: rgb(0, 114, 188);
    --custom-lightblue: rgb(204, 227, 242);
    --custom-orange: rgb(255, 127, 42); 
    --custom-lightorange: rgb(255, 204, 170); 
  }

  @font-face {
   font-family: 'NanumSquare';
   font-weight: 400;
   src: url(NanumSquare/NanumSquareR.eot);
   src: url(NanumSquare/NanumSquareR.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareR.woff) format('woff'),
        url(NanumSquare/NanumSquareR.ttf) format('truetype');
  }
  @font-face {
   font-family: 'NanumSquare';
   font-weight: 700;
   src: url(NanumSquare/NanumSquareB.eot);
   src: url(NanumSquare/NanumSquareB.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareB.woff) format('woff'),
        url(NanumSquare/NanumSquareB.ttf) format('truetype');
  }
  @font-face {
   font-family: 'NanumSquare';
   font-weight: 800;
   src: url(NanumSquare/NanumSquareEB.eot);
   src: url(NanumSquare/NanumSquareEB.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareEB.woff) format('woff'),
        url(NanumSquare/NanumSquareEB.ttf) format('truetype');
  }
  @font-face {
   font-family: 'NanumSquare';
   font-weight: 300;
   src: url(NanumSquare/NanumSquareL.eot);
   src: url(NanumSquare/NanumSquareL.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareL.woff) format('woff'),
        url(NanumSquare/NanumSquareL.ttf) format('truetype');
  }

  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       var(--custom-blue);
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       var(--custom-blue);
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */

  .preface {
    font-size: 11pt;
    background-color: var(--custom-lightblue);
    margin-top: 2em;
    margin-bottom: 0.5em;  
    padding: 1.5em;
    padding-top: 1em;
    border-color: DodgerBlue;
  }

  h1 {
    font-size: 30px !important;  
    color: var(--custom-blue) !important;
    font-family: NanumSquare !important;
    margin-top: 15px !important;
    padding-top: 15px !important;  
    margin-bottom: 15px !important;
    font-weight: bold;
  }

  h2 {
    font-size: 25px !important;  
    color: var(--custom-blue) !important;  
    font-family: NanumSquare !important;  
    padding-top: 15px !important;  
    margin-top: 15px !important;
    padding-bottom: 10px !important;  
    margin-bottom: 10px !important;    
    font-weight: bold;
  }

  h3 {
    font-size: 20px !important;  
    color: var(--custom-blue) !important;  
    font-family: NanumSquare !important;  
    margin-top: 10px !important;
    margin-bottom: 10px !important; 
    padding-top: 10px !important;
    padding-bottom: 10px !important;   
    font-weight: bold;
  }

  d-byline h3 {
    font-size: 0.6rem !important;   
    font-weight: 400 !important;   
    color: rgba(0, 0, 0, 0.5) !important;   
    margin: 0 !important;   
  }
      
  d-byline {
    contain: content;
    overflow: hidden;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    font-size: 0.8rem;
    line-height: 1.8em;
    padding: 1.5rem 0;
    min-height: 1.8em;
  } 

  .bg-blue,
  .bg-orange,
  .bg-grey {
    padding: 1.6em;
    margin-top: 1.0em;
    margin-bottom: 1.0em;
  }
  .bg-blue {
    background-color: var(--custom-lightblue);
  }
  .bg-orange {
    background-color: var(--custom-lightorange);
  }
  .bg-grey {
    background-color: var(--custom-grey20);
  }
  .bg-blue > *:last-child,
  .bg-orange > *:last-child,
  .bg-grey > *:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .panelset {
    --panel-tab-foreground: currentColor !important;
    --panel-tab-active-foreground: var(--custom-blue) !important;
    --panel-tab-active-background: var(--custom-lightblue) !important;  
    --panel-tab-hover-foreground: var(--custom-blue) !important;
    --panel-tabs-border-bottom: #ddd !important;
    --panel-tab-inactive-opacity: 0.5 !important;
  }

  .panel {
    margin-bottom: 10px;
    margin-top: 10px;
  }
  </style>
  <style type="text/css">
  /* base style */

  /* FONT FAMILIES */

  :root {
    --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  body,
  .posts-list .post-preview p,
  .posts-list .description p {
    font-family: var(--body-font), var(--body-default);
  }

  h1, h2, h3, h4, h5, h6,
  .posts-list .post-preview h2,
  .posts-list .description h2 {
    font-family: var(--heading-font), var(--heading-default);
  }

  d-article div.sourceCode code,
  d-article pre code {
    font-family: var(--mono-font), var(--mono-default);
  }


  /*-- TITLE --*/
  d-title h1,
  .posts-list > h1 {
    color: var(--title-color, black);
  }

  d-title h1 {
    font-size: var(--title-size, 50px);
  }

  /*-- HEADERS --*/
  d-article h1,
  d-article h2,
  d-article h3,
  d-article h4,
  d-article h5,
  d-article h6 {
    color: var(--header-color, rgba(0, 0, 0, 0.8));
  }

  /*-- BODY --*/
  d-article > p,  /* only text inside of <p> tags */
  d-article > ul, /* lists */
  d-article > ol {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
    font-size: var(--body-size, 1.06rem);
  }


  /*-- CODE --*/
  d-article div.sourceCode code,
  d-article pre code {
    font-size: var(--code-size, 14px);
  }

  /*-- ASIDE --*/
  d-article aside {
    font-size: var(--aside-size, 12px);
    color: var(--aside-color, rgba(0, 0, 0, 0.6));
  }

  /*-- FIGURE CAPTIONS --*/
  figure .caption,
  figure figcaption,
  .figure .caption {
    font-size: var(--fig-cap-size, 13px);
    color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
  }

  /*-- METADATA --*/
  d-byline h3 {
    font-size: var(--heading-size, 0.6rem);
    color: var(--heading-color, rgba(0, 0, 0, 0.5));
  }

  d-byline {
    font-size: var(--body-size, 0.8rem);
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  d-byline a,
  d-article d-byline a {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  /*-- TABLE OF CONTENTS --*/
  .d-contents nav h3 {
    font-size: var(--heading-size, 18px);
  }

  .d-contents nav a {
    font-size: var(--contents-size, 13px);
  }

  /*-- APPENDIX --*/
  d-appendix h3 {
    font-size: var(--heading-size, 15px);
    color: var(--heading-color, rgba(0, 0, 0, 0.65));
  }

  d-appendix {
    font-size: var(--text-size, 0.8em);
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  d-appendix d-footnote-list a.footnote-backlink {
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  .distill-site-header .title {
    font-size: var(--title-size, 18px);
    font-family: var(--navbar-font), var(--heading-default);
  }

  .distill-site-header a,
  .nav-dropdown .nav-dropbtn {
    font-family: var(--navbar-font), var(--heading-default);
  }

  .nav-dropdown .nav-dropbtn {
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    font-size: var(--text-size, 15px);
  }

  .distill-site-header a:hover,
  .nav-dropdown:hover .nav-dropbtn {
    color: var(--hover-color, white);
  }

  .distill-site-header {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer a:hover {
    color: var(--hover-color, white);
  }</style>
  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.8/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Introduce alookr","description":"Introduce alookr package for data cleansing, spliting and modeling","authors":[{"author":"Choonghyun Ryu","authorURL":"https://dataholic.netlify.app/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-11-30T00:00:00.000+00:00","citationText":"Ryu, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://choonghyunryu.github.io/alookr/">
<img src="fig/alookr.png" alt="Logo"/>
</a>
<a href="index.html" class="title">alookr vignettes</a>
</div>
<div class="nav-right">
<a href="index.html">Introduce alookr</a>
<a href="cleansing.html">Cleansing the Dataset</a>
<a href="split.html">Splitting the Dataset</a>
<a href="modeling.html">Classification Modeling</a>
<a href="https://github.com/choonghyunryu/alookr">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Introduce alookr</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Introduce alookr package for data cleansing, spliting and modeling</p></p>
</div>

<div class="d-byline">
  Choonghyun Ryu <a href="https://dataholic.netlify.app/" class="uri">https://dataholic.netlify.app/</a> 
  
<br/>2021-11-30
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#install-alookr">Install alookr</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#cleansing-the-dataset">Cleansing the dataset</a>
<ul>
<li><a href="#data-create-example-dataset">Data: create example dataset</a></li>
<li><a href="#clean-dataset">Clean dataset</a></li>
<li><a href="#diagnosis-and-removal-of-highly-correlated-variables">Diagnosis and removal of highly correlated variables</a></li>
</ul></li>
<li><a href="#split-the-data-into-a-train-set-and-a-test-set">Split the data into a train set and a test set</a>
<ul>
<li><a href="#data-credit-card-default-data">Data: Credit Card Default Data</a></li>
<li><a href="#split-dataset">Split dataset</a></li>
<li><a href="#compare-dataset">Compare dataset</a></li>
<li><a href="#extract-traintest-dataset">Extract train/test dataset</a></li>
</ul></li>
<li><a href="#modeling-and-evaluate-predict">Modeling and Evaluate, Predict</a>
<ul>
<li><a href="#data-wisconsin-breast-cancer-data">Data: Wisconsin Breast Cancer Data</a></li>
<li><a href="#preperation-the-data">Preperation the data</a></li>
<li><a href="#split-data-set">Split data set</a></li>
<li><a href="#handling-the-imbalanced-classes-data-with-sampling_target">Handling the imbalanced classes data with <code>sampling_target()</code></a></li>
<li><a href="#cleansing-the-dataset-for-classification-modeling-with-cleanse">Cleansing the dataset for classification modeling with <code>cleanse()</code></a></li>
<li><a href="#extract-test-set-for-evaluation-of-the-model-with-extract_set">Extract test set for evaluation of the model with <code>extract_set()</code></a></li>
<li><a href="#binary-classification-modeling-with-run_models">Binary classification modeling with <code>run_models()</code></a></li>
<li><a href="#evaluate-the-model">Evaluate the model</a></li>
<li><a href="#predict">Predict</a></li>
</ul></li>
</ul>
</nav>
</div>
<h2 id="overview">Overview</h2>
<p>Binary classification modeling with <code>alookr</code>.</p>
<p>Features:</p>
<ul>
<li>Clean and split data sets to train and test.</li>
<li>Create several representative models.</li>
<li>Evaluate the performance of the model to select the best model.</li>
<li>Support the entire process of developing a binary classification model.</li>
</ul>
<p>The name <code>alookr</code> comes from <code>looking at the analytics process</code> in the data analysis process.</p>
<h2 id="install-alookr">Install alookr</h2>
<p>The released version is available on CRAN. but not yet.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"alookr"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Or you can get the development version without vignettes from GitHub:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>devtools</span><span class='fu'>::</span><span class='fu'><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>install_github</a></span><span class='op'>(</span><span class='st'>"choonghyunryu/alookr"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Or you can get the development version with vignettes from GitHub:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ISLR"</span>, <span class='st'>"spelling"</span>, <span class='st'>"mlbench"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>devtools</span><span class='fu'>::</span><span class='fu'><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>install_github</a></span><span class='op'>(</span><span class='st'>"choonghyunryu/alookr"</span>, build_vignettes <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="usage">Usage</h2>
<p>alookr includes several vignette files, which we use throughout the documentation.</p>
<p>Provided vignettes is as follows.</p>
<ul>
<li>Cleansing the dataset</li>
<li>Split the data into a train set and a test set</li>
<li>Modeling and Evaluate, Predict</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/browseVignettes.html'>browseVignettes</a></span><span class='op'>(</span>package <span class='op'>=</span> <span class='st'>"alookr"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="cleansing-the-dataset">Cleansing the dataset</h2>
<h3 id="data-create-example-dataset">Data: create example dataset</h3>
<p>To illustrate basic use of the alookr package, create the <code>data_exam</code> with sample function. The <code>data_exam</code> dataset include 5 variables.</p>
<p>variables are as follows.:</p>
<ul>
<li><code>id</code> : character</li>
<li><code>year</code>: character</li>
<li><code>count</code>: numeric</li>
<li><code>alpha</code> : character</li>
<li><code>flag</code> : character</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create sample dataset</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123L</span><span class='op'>)</span>
<span class='va'>id</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>1000</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>letters</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='va'>x</span><span class='op'>)</span>, collapse <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>year</span> <span class='op'>&lt;-</span> <span class='st'>"2018"</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123L</span><span class='op'>)</span>
<span class='va'>count</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, size <span class='op'>=</span> <span class='fl'>1000</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123L</span><span class='op'>)</span>
<span class='va'>alpha</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>letters</span>, size <span class='op'>=</span> <span class='fl'>1000</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123L</span><span class='op'>)</span>
<span class='va'>flag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Y"</span>, <span class='st'>"N"</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>1000</span>, prob <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>0.9</span><span class='op'>)</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>data_exam</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>year</span>, <span class='va'>count</span>, <span class='va'>alpha</span>, <span class='va'>flag</span>, stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># structure of dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>data_exam</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  5 variables:
 $ id   : chr  &quot;osncj1&quot; &quot;rvket2&quot; &quot;nvesi3&quot; &quot;chgji4&quot; ...
 $ year : chr  &quot;2018&quot; &quot;2018&quot; &quot;2018&quot; &quot;2018&quot; ...
 $ count: int  3 3 10 2 6 5 4 6 9 10 ...
 $ alpha: chr  &quot;o&quot; &quot;s&quot; &quot;n&quot; &quot;c&quot; ...
 $ flag : chr  &quot;N&quot; &quot;N&quot; &quot;N&quot; &quot;N&quot; ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># summary of dataset</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>data_exam</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      id                year               count       
 Length:1000        Length:1000        Min.   : 1.000  
 Class :character   Class :character   1st Qu.: 3.000  
 Mode  :character   Mode  :character   Median : 6.000  
                                       Mean   : 5.698  
                                       3rd Qu.: 8.000  
                                       Max.   :10.000  
    alpha               flag          
 Length:1000        Length:1000       
 Class :character   Class :character  
 Mode  :character   Mode  :character  
                                      
                                      
                                      </code></pre>
</div>
<h3 id="clean-dataset">Clean dataset</h3>
<p><code>cleanse()</code> cleans up the dataset before fitting the classification model.</p>
<p>The function of cleanse() is as follows.:</p>
<ul>
<li>remove variables whose unique value is one</li>
<li>remove variables with high unique rate</li>
<li>converts character variables to factor</li>
<li>remove variables with missing value</li>
</ul>
<h4 id="cleanse-dataset-with-cleanse">Cleanse dataset with <code>cleanse()</code></h4>
<p>For example, we can cleanse all variables in <code>data_exam</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>alookr</span><span class='op'>)</span>

<span class='co'># cleansing dataset</span>
<span class='va'>newDat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/cleanse.data.frame.html'>cleanse</a></span><span class='op'>(</span><span class='va'>data_exam</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>── Checking unique value ─────────────────────────── unique value is one ──
• year

── Checking unique rate ─────────────────────────────── high unique rate ──
• id = 1000(1)

── Checking character variables ─────────────────────── categorical data ──
• alpha
• flag</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># structure of cleansing dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>newDat</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  3 variables:
 $ count: int  3 3 10 2 6 5 4 6 9 10 ...
 $ alpha: Factor w/ 26 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 15 19 14 3 10 18 22 11 5 20 ...
 $ flag : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: 1 1 1 1 2 1 1 1 1 1 ...</code></pre>
</div>
<ul>
<li><code>remove variables whose unique value is one</code> : The year variable has only one value, “2018”. Not needed when fitting the model. So it was removed.</li>
<li><code>remove variables with high unique rate</code> : If the number of levels of categorical data is very large, it is not suitable for classification model. In this case, it is highly likely to be an identifier of the data. So, remove the categorical (or character) variable with a high value of the unique rate defined as “number of levels / number of observations”.
<ul>
<li>The unique rate of the id variable with the number of levels of 1000 is 1. This variable is the object of the removal by identifier.</li>
<li>The unique rate of the alpha variable is 0.026 and this variable is also removed.</li>
</ul></li>
<li><code>converts character variables to factor</code> : The character type flag variable is converted to a factor type.</li>
</ul>
<p>For example, we can not remove the categorical data that is removed by changing the threshold of the <code>unique rate</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># cleansing dataset</span>
<span class='va'>newDat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/cleanse.data.frame.html'>cleanse</a></span><span class='op'>(</span><span class='va'>data_exam</span>, uniq_thres <span class='op'>=</span> <span class='fl'>0.03</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>── Checking unique value ─────────────────────────── unique value is one ──
• year

── Checking unique rate ─────────────────────────────── high unique rate ──
• id = 1000(1)

── Checking character variables ─────────────────────── categorical data ──
• alpha
• flag</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># structure of cleansing dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>newDat</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  3 variables:
 $ count: int  3 3 10 2 6 5 4 6 9 10 ...
 $ alpha: Factor w/ 26 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 15 19 14 3 10 18 22 11 5 20 ...
 $ flag : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: 1 1 1 1 2 1 1 1 1 1 ...</code></pre>
</div>
<p>The <code>alpha</code> variable was not removed.</p>
<p>If you do not want to apply a unique rate, you can set the value of the <code>uniq</code> argument to FALSE.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># cleansing dataset</span>
<span class='va'>newDat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/cleanse.data.frame.html'>cleanse</a></span><span class='op'>(</span><span class='va'>data_exam</span>, uniq <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>── Checking character variables ─────────────────────── categorical data ──
• id
• year
• alpha
• flag</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># structure of cleansing dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>newDat</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  5 variables:
 $ id   : Factor w/ 1000 levels &quot;ablnc282&quot;,&quot;abqym54&quot;,..: 594 715 558 94 727 270 499 882 930 515 ...
 $ year : Factor w/ 1 level &quot;2018&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ count: int  3 3 10 2 6 5 4 6 9 10 ...
 $ alpha: Factor w/ 26 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 15 19 14 3 10 18 22 11 5 20 ...
 $ flag : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: 1 1 1 1 2 1 1 1 1 1 ...</code></pre>
</div>
<p>If you do not want to force type conversion of a character variable to factor, you can set the value of the <code>char</code> argument to FALSE.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># cleansing dataset</span>
<span class='va'>newDat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/cleanse.data.frame.html'>cleanse</a></span><span class='op'>(</span><span class='va'>data_exam</span>, char <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>── Checking unique value ─────────────────────────── unique value is one ──
• year

── Checking unique rate ─────────────────────────────── high unique rate ──
• id = 1000(1)</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># structure of cleansing dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>newDat</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  3 variables:
 $ count: int  3 3 10 2 6 5 4 6 9 10 ...
 $ alpha: chr  &quot;o&quot; &quot;s&quot; &quot;n&quot; &quot;c&quot; ...
 $ flag : chr  &quot;N&quot; &quot;N&quot; &quot;N&quot; &quot;N&quot; ...</code></pre>
</div>
<p>If you want to remove a variable that contains missing values, specify the value of the <code>missing</code> argument as TRUE. The following example <strong>removes the flag variable</strong> that contains the missing value.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>data_exam</span><span class='op'>$</span><span class='va'>flag</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span> 

<span class='co'># cleansing dataset</span>
<span class='va'>newDat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/cleanse.data.frame.html'>cleanse</a></span><span class='op'>(</span><span class='va'>data_exam</span>, missing <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>── Checking missing value ────────────────────────────────── included NA ──
• flag

── Checking unique value ─────────────────────────── unique value is one ──
• year

── Checking unique rate ─────────────────────────────── high unique rate ──
• id = 1000(1)

── Checking character variables ─────────────────────── categorical data ──
• alpha</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># structure of cleansing dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>newDat</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  2 variables:
 $ count: int  3 3 10 2 6 5 4 6 9 10 ...
 $ alpha: Factor w/ 26 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 15 19 14 3 10 18 22 11 5 20 ...</code></pre>
</div>
<h3 id="diagnosis-and-removal-of-highly-correlated-variables">Diagnosis and removal of highly correlated variables</h3>
<p>In the linear model, there is a multicollinearity if there is a strong correlation between independent variables. So it is better to remove one variable from a pair of variables where the correlation exists.</p>
<p>Even if it is not a linear model, removing one variable from a strongly correlated pair of variables can also reduce the overhead of the operation. It is also easy to interpret the model.</p>
<h4 id="cleanse-dataset-with-treatment_corr">Cleanse dataset with <code>treatment_corr()</code></h4>
<p><code>treatment_corr()</code> diagnose pairs of highly correlated variables or remove on of them.</p>
<p><code>treatment_corr()</code> calculates correlation coefficient of pearson for numerical variable, and correlation coefficient of spearman for categorical variable.</p>
<p>For example, we can diagnosis and removal of highly correlated variables:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># numerical variable</span>
<span class='va'>x1</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>12L</span><span class='op'>)</span>
<span class='va'>x2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, size <span class='op'>=</span> <span class='fl'>100</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>x1</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1234L</span><span class='op'>)</span>
<span class='va'>x3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, size <span class='op'>=</span> <span class='fl'>100</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>x1</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>

<span class='co'># categorical variable</span>
<span class='va'>x4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span><span class='op'>]</span>, time <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>100L</span><span class='op'>)</span>
<span class='va'>x5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>6</span>, size <span class='op'>=</span> <span class='fl'>20</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>]</span>, time <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>200L</span><span class='op'>)</span>
<span class='va'>x6</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, size <span class='op'>=</span> <span class='fl'>20</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>]</span>, time <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>300L</span><span class='op'>)</span>
<span class='va'>x7</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>letters</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>, size <span class='op'>=</span> <span class='fl'>100</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>exam</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>x1</span>, <span class='va'>x2</span>, <span class='va'>x3</span>, <span class='va'>x4</span>, <span class='va'>x5</span>, <span class='va'>x6</span>, <span class='va'>x7</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>exam</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   100 obs. of  7 variables:
 $ x1: int  1 2 3 4 5 6 7 8 9 10 ...
 $ x2: num  2.55 4.55 9.55 12.55 10.55 ...
 $ x3: num  0.194 2.194 4.194 6.194 3.194 ...
 $ x4: Factor w/ 20 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
 $ x5: Factor w/ 13 levels &quot;c&quot;,&quot;e&quot;,&quot;f&quot;,&quot;g&quot;,..: 1 5 3 2 4 7 6 8 9 8 ...
 $ x6: Factor w/ 15 levels &quot;c&quot;,&quot;d&quot;,&quot;f&quot;,&quot;g&quot;,..: 1 2 3 4 3 5 6 7 8 9 ...
 $ x7: Factor w/ 5 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 2 2 1 4 5 1 4 3 1 5 ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>exam</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  x1        x2         x3 x4 x5 x6 x7
1  1  2.554297  0.1939687  a  c  c  b
2  2  4.554297  2.1939687  b  h  d  b
3  3  9.554297  4.1939687  c  f  f  a
4  4 12.554297  6.1939687  d  e  g  d
5  5 10.554297  3.1939687  e  g  f  e
6  6  6.554297 10.1939687  f  l  h  a</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># default case</span>
<span class='va'>exam_01</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/treatment_corr.html'>treatment_corr</a></span><span class='op'>(</span><span class='va'>exam</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>exam_01</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>         x2         x3 x6 x7
1  2.554297  0.1939687  c  b
2  4.554297  2.1939687  d  b
3  9.554297  4.1939687  f  a
4 12.554297  6.1939687  g  d
5 10.554297  3.1939687  f  e
6  6.554297 10.1939687  h  a</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># not removing variables</span>
<span class='fu'><a href='https://rdrr.io/pkg/alookr/man/treatment_corr.html'>treatment_corr</a></span><span class='op'>(</span><span class='va'>exam</span>, treat <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># Set a threshold to detecting variables when correlation greater then 0.9</span>
<span class='fu'><a href='https://rdrr.io/pkg/alookr/man/treatment_corr.html'>treatment_corr</a></span><span class='op'>(</span><span class='va'>exam</span>, corr_thres <span class='op'>=</span> <span class='fl'>0.9</span>, treat <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># not verbose mode</span>
<span class='va'>exam_02</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/treatment_corr.html'>treatment_corr</a></span><span class='op'>(</span><span class='va'>exam</span>, verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>exam_02</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>         x2         x3 x6 x7
1  2.554297  0.1939687  c  b
2  4.554297  2.1939687  d  b
3  9.554297  4.1939687  f  a
4 12.554297  6.1939687  g  d
5 10.554297  3.1939687  f  e
6  6.554297 10.1939687  h  a</code></pre>
</div>
<ul>
<li><code>remove variables whose strong correlation</code> : x1, x4, x5 are removed.</li>
</ul>
<h2 id="split-the-data-into-a-train-set-and-a-test-set">Split the data into a train set and a test set</h2>
<h3 id="data-credit-card-default-data">Data: Credit Card Default Data</h3>
<p><code>Default</code> of <code>ISLR package</code> is a simulated data set containing information on ten thousand customers. The aim here is to predict which customers will default on their credit card debt.</p>
<p>A data frame with 10000 observations on the following 4 variables.:</p>
<ul>
<li><code>default</code> : factor. A factor with levels No and Yes indicating whether the customer defaulted on their debt</li>
<li><code>student</code>: factor. A factor with levels No and Yes indicating whether the customer is a student</li>
<li><code>balance</code>: numeric. The average balance that the customer has remaining on their credit card after making their monthly payment</li>
<li><code>income</code> : numeric. Income of customer</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Credit Card Default Data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>ISLR</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/ISLR/man/Default.html'>Default</a></span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  default student   balance    income
1      No      No  729.5265 44361.625
2      No     Yes  817.1804 12106.135
3      No      No 1073.5492 31767.139
4      No      No  529.2506 35704.494
5      No      No  785.6559 38463.496
6      No     Yes  919.5885  7491.559</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># structure of dataset</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='fu'>ISLR</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/ISLR/man/Default.html'>Default</a></span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   10000 obs. of  4 variables:
 $ default: Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ student: Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 2 1 1 1 2 1 2 1 1 ...
 $ balance: num  730 817 1074 529 786 ...
 $ income : num  44362 12106 31767 35704 38463 ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># summary of dataset</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'>ISLR</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/ISLR/man/Default.html'>Default</a></span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> default    student       balance           income     
 No :9667   No :7056   Min.   :   0.0   Min.   :  772  
 Yes: 333   Yes:2944   1st Qu.: 481.7   1st Qu.:21340  
                       Median : 823.6   Median :34553  
                       Mean   : 835.4   Mean   :33517  
                       3rd Qu.:1166.3   3rd Qu.:43808  
                       Max.   :2654.3   Max.   :73554  </code></pre>
</div>
<h3 id="split-dataset">Split dataset</h3>
<p><code>split_by()</code> splits the data.frame or tbl_df into a training set and a test set.</p>
<h4 id="split-dataset-with-split_by">Split dataset with <code>split_by()</code></h4>
<p>The <code>split_df</code> class is created, which contains the split information and criteria to separate the training and the test set.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>alookr</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='co'># Generate data for the example</span>
<span class='va'>sb</span> <span class='op'>&lt;-</span> <span class='fu'>ISLR</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/ISLR/man/Default.html'>Default</a></span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/split_by.data.frame.html'>split_by</a></span><span class='op'>(</span><span class='va'>default</span>, seed <span class='op'>=</span> <span class='fl'>6534</span><span class='op'>)</span>

<span class='va'>sb</span>
</code></pre>
</div>
<pre><code># A tibble: 10,000 x 5
# Groups:   split_flag [2]
  default student balance income split_flag
  &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 No      No         730. 44362. train     
2 No      Yes        817. 12106. train     
3 No      No        1074. 31767. train     
4 No      No         529. 35704. train     
# … with 9,996 more rows</code></pre>
</div>
<p>The attributes of the <code>split_df</code> class are as follows.:</p>
<ul>
<li>split_seed : integer. random seed used for splitting</li>
<li>target : character. the name of the target variable</li>
<li>binary : logical. whether the target variable is binary class</li>
<li>minority : character. the name of the minority class</li>
<li>majority : character. the name of the majority class</li>
<li>minority_rate : numeric. the rate of the minority class</li>
<li>majority_rate : numeric. the rate of the majority class</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>attr_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>attr_names</span>
</code></pre>
</div>
<pre><code> [1] &quot;names&quot;         &quot;row.names&quot;     &quot;groups&quot;        &quot;class&quot;        
 [5] &quot;split_seed&quot;    &quot;target&quot;        &quot;binary&quot;        &quot;minority&quot;     
 [9] &quot;majority&quot;      &quot;minority_rate&quot; &quot;majority_rate&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sb_attr</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>)</span>

<span class='co'># The third property, row.names, is excluded from the output because its length is very long.</span>
<span class='va'>sb_attr</span><span class='op'>[</span><span class='op'>!</span><span class='va'>attr_names</span> <span class='op'>%in%</span> <span class='st'>"row.names"</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>$names
[1] &quot;default&quot;    &quot;student&quot;    &quot;balance&quot;    &quot;income&quot;     &quot;split_flag&quot;

$groups
# A tibble: 2 x 2
  split_flag       .rows
  &lt;chr&gt;      &lt;list&lt;int&gt;&gt;
1 test           [3,000]
2 train          [7,000]

$class
[1] &quot;split_df&quot;   &quot;grouped_df&quot; &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;

$split_seed
[1] 6534

$target
  default 
&quot;default&quot; 

$binary
[1] TRUE

$minority
[1] &quot;Yes&quot;

$majority
[1] &quot;No&quot;

$minority_rate
   Yes 
0.0333 

$majority_rate
    No 
0.9667 </code></pre>
</div>
<p><code>summary()</code> summarizes the information of two datasets splitted by <code>split_by()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>** Split train/test set information **
 + random seed        :  6534 
 + split data            
    - train set count :  7000 
    - test set count  :  3000 
 + target variable    :  default 
    - minority class  :  Yes (0.033300)
    - majority class  :  No (0.966700)</code></pre>
</div>
<h3 id="compare-dataset">Compare dataset</h3>
<p>Train data and test data should be similar. If the two datasets are not similar, the performance of the predictive model may be reduced.</p>
<p><code>alookr</code> provides a function to compare the similarity between train dataset and test dataset.</p>
<p>If the two data sets are not similar, the train dataset and test dataset should be splitted again from the original data.</p>
<h4 id="comparison-of-categorical-variables-with-compare_target_category">Comparison of categorical variables with <code>compare_target_category()</code></h4>
<p>Compare the statistics of the categorical variables of the train set and test set included in the “split_df” class.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 5
  variable level train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 default  No    96.7  96.7   0.00476
2 default  Yes    3.33  3.33  0.00476
3 student  No    70.0  71.8   1.77   
4 student  Yes   30.0  28.2   1.77   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># compare variables that are character data types.</span>
<span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span>add_character <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 5
  variable level train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 default  No    96.7  96.7   0.00476
2 default  Yes    3.33  3.33  0.00476
3 student  No    70.0  71.8   1.77   
4 student  Yes   30.0  28.2   1.77   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># display marginal</span>
<span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span>margin <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 5
  variable level    train   test abs_diff
  &lt;chr&gt;    &lt;fct&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
1 default  No       96.7   96.7   0.00476
2 default  Yes       3.33   3.33  0.00476
3 default  &lt;Total&gt; 100    100     0.00952
4 student  No       70.0   71.8   1.77   
# … with 2 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># student variable only</span>
<span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span><span class='va'>student</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 5
  variable level train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 student  No     70.0  71.8     1.77
2 student  Yes    30.0  28.2     1.77</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span><span class='va'>student</span>, margin <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 5
  variable level   train  test abs_diff
  &lt;chr&gt;    &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 student  No       70.0  71.8     1.77
2 student  Yes      30.0  28.2     1.77
3 student  &lt;Total&gt; 100   100       3.54</code></pre>
</div>
<p>compare_target_category() returns tbl_df, where the variables have the following.:</p>
<ul>
<li>variable : character. categorical variable name</li>
<li>level : factor. level of categorical variables</li>
<li>train : numeric. the relative frequency of the level in the train set</li>
<li>test : numeric. the relative frequency of the level in the test set</li>
<li>abs_diff : numeric. the absolute value of the difference between two relative frequencies</li>
</ul>
<h4 id="comparison-of-numeric-variables-with-compare_target_numeric">Comparison of numeric variables with <code>compare_target_numeric()</code></h4>
<p>Compare the statistics of the numerical variables of the train set and test set included in the “split_df” class.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_numeric.html'>compare_target_numeric</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 7
  variable train_mean test_mean train_sd test_sd train_z test_z
  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 balance        836.      834.     487.    477.    1.72   1.75
2 income       33446.    33684.   13437.  13101.    2.49   2.57</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># balance variable only</span>
<span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_numeric.html'>compare_target_numeric</a></span><span class='op'>(</span><span class='va'>balance</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 7
  variable train_mean test_mean train_sd test_sd train_z test_z
  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 balance        836.      834.     487.    477.    1.72   1.75</code></pre>
</div>
<p>compare_target_numeric() returns tbl_df, where the variables have the following.:</p>
<ul>
<li>variable : character. numeric variable name</li>
<li>train_mean : numeric. arithmetic mean of train set</li>
<li>test_mean : numeric. arithmetic mean of test set</li>
<li>train_sd : numeric. standard deviation of train set</li>
<li>test_sd : numeric. standard deviation of test set</li>
<li>train_z : numeric. the arithmetic mean of the train set divided by the standard deviation</li>
<li>test_z : numeric. the arithmetic mean of the test set divided by the standard deviation</li>
</ul>
<h4 id="comparison-plot-with-compare_plot">Comparison plot with <code>compare_plot()</code></h4>
<p>Plot compare information of the train set and test set included in the “split_df” class.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># income variable only</span>
<span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_plot.html'>compare_plot</a></span><span class='op'>(</span><span class='st'>"income"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="index_files/figure-html5/compare_plot-1.png" width="576" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># all varibales</span>
<span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_plot.html'>compare_plot</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="index_files/figure-html5/compare_plot-2.png" width="576" /><img src="index_files/figure-html5/compare_plot-3.png" width="576" /><img src="index_files/figure-html5/compare_plot-4.png" width="576" /><img src="index_files/figure-html5/compare_plot-5.png" width="576" /></p>
</div>
<h4 id="diagnosis-of-train-set-and-test-set-with-compare_diag">Diagnosis of train set and test set with <code>compare_diag()</code></h4>
<p>Diagnosis of similarity between datasets splitted by train set and set included in the “split_df” class.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>defaults</span> <span class='op'>&lt;-</span> <span class='fu'>ISLR</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/ISLR/man/Default.html'>Default</a></span>
<span class='va'>defaults</span><span class='op'>$</span><span class='va'>id</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span><span class='op'>(</span><span class='va'>defaults</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='va'>defaults</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span><span class='op'>(</span><span class='va'>defaults</span><span class='op'>)</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>, <span class='st'>"student"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>
<span class='va'>defaults</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span><span class='op'>(</span><span class='va'>defaults</span><span class='op'>)</span><span class='op'>)</span>, <span class='fl'>10</span><span class='op'>)</span>, <span class='st'>"balance"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>

<span class='va'>sb_2</span> <span class='op'>&lt;-</span> <span class='va'>defaults</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/split_by.data.frame.html'>split_by</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>

<span class='va'>sb_2</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_diag.html'>compare_diag</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$missing_value
# A tibble: 3 x 4
  variables train_misscount train_missrate test_missrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1 student                 3         0.0429       NA     
2 balance                 8         0.114        NA     
3 balance                 2        NA             0.0667

$single_value
# A tibble: 0 x 3
# … with 3 variables: variables &lt;chr&gt;, train_uniq &lt;lgl&gt;,
#   test_uniq &lt;lgl&gt;

$uniq_rate
# A tibble: 0 x 5
# … with 5 variables: variables &lt;chr&gt;, train_uniqcount &lt;int&gt;,
#   train_uniqrate &lt;dbl&gt;, test_uniqcount &lt;int&gt;, test_uniqrate &lt;dbl&gt;

$missing_level
# A tibble: 1 x 4
  variables n_levels train_missing_nlevel test_missing_nlevel
  &lt;chr&gt;        &lt;int&gt;                &lt;int&gt;               &lt;int&gt;
1 student          3                    0                   1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sb_2</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_diag.html'>compare_diag</a></span><span class='op'>(</span>add_character <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$missing_value
# A tibble: 3 x 4
  variables train_misscount train_missrate test_missrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1 student                 3         0.0429       NA     
2 balance                 8         0.114        NA     
3 balance                 2        NA             0.0667

$single_value
# A tibble: 0 x 3
# … with 3 variables: variables &lt;chr&gt;, train_uniq &lt;lgl&gt;,
#   test_uniq &lt;lgl&gt;

$uniq_rate
# A tibble: 0 x 5
# … with 5 variables: variables &lt;chr&gt;, train_uniqcount &lt;int&gt;,
#   train_uniqrate &lt;dbl&gt;, test_uniqcount &lt;int&gt;, test_uniqrate &lt;dbl&gt;

$missing_level
# A tibble: 1 x 4
  variables n_levels train_missing_nlevel test_missing_nlevel
  &lt;chr&gt;        &lt;int&gt;                &lt;int&gt;               &lt;int&gt;
1 student          3                    0                   1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sb_2</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_diag.html'>compare_diag</a></span><span class='op'>(</span>uniq_thres <span class='op'>=</span> <span class='fl'>0.0005</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$missing_value
# A tibble: 3 x 4
  variables train_misscount train_missrate test_missrate
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;
1 student                 3         0.0429       NA     
2 balance                 8         0.114        NA     
3 balance                 2        NA             0.0667

$single_value
# A tibble: 0 x 3
# … with 3 variables: variables &lt;chr&gt;, train_uniq &lt;lgl&gt;,
#   test_uniq &lt;lgl&gt;

$uniq_rate
# A tibble: 2 x 5
  variables train_uniqcount train_uniqrate test_uniqcount
  &lt;chr&gt;               &lt;int&gt;          &lt;dbl&gt;          &lt;int&gt;
1 default                NA             NA              2
2 student                NA             NA              2
# … with 1 more variable: test_uniqrate &lt;dbl&gt;

$missing_level
# A tibble: 1 x 4
  variables n_levels train_missing_nlevel test_missing_nlevel
  &lt;chr&gt;        &lt;int&gt;                &lt;int&gt;               &lt;int&gt;
1 student          3                    0                   1</code></pre>
</div>
<h3 id="extract-traintest-dataset">Extract train/test dataset</h3>
<p>If you compare the train set with the test set and find that the two datasets are similar, extract the data from the split_df object.</p>
<h4 id="extract-train-set-or-test-set-with-extract_set">Extract train set or test set with <code>extract_set()</code></h4>
<p>Extract train set or test set from split_df class object.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/extract_set.html'>extract_set</a></span><span class='op'>(</span>set <span class='op'>=</span> <span class='st'>"train"</span><span class='op'>)</span>

<span class='va'>test</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/extract_set.html'>extract_set</a></span><span class='op'>(</span>set <span class='op'>=</span> <span class='st'>"test"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 7000    4</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 3000    4</code></pre>
</div>
<h4 id="extract-the-data-to-fit-the-model-with-sampling_target">Extract the data to fit the model with <code>sampling_target()</code></h4>
<p>In a target class, the ratio of the majority class to the minority class is not similar and the ratio of the minority class is very small, which is called the <code>imbalanced class</code>.</p>
<p>If target variable is an imbalanced class, the characteristics of the majority class are actively reflected in the model. This model implies an error in predicting the minority class as the majority class. So we have to make the train dataset a balanced class.</p>
<p><code>sampling_target()</code> performs sampling on the train set of split_df to resolve the imbalanced class.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># under-sampling with random seed</span>
<span class='va'>under</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>1234L</span><span class='op'>)</span>

<span class='va'>under</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No        233
2 Yes       233</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># under-sampling with random seed, and minority class frequency is 40%</span>
<span class='va'>under40</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>1234L</span>, perc <span class='op'>=</span> <span class='fl'>40</span><span class='op'>)</span>

<span class='va'>under40</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No        349
2 Yes       233</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># over-sampling with random seed</span>
<span class='va'>over</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"ubOver"</span>, seed <span class='op'>=</span> <span class='fl'>1234L</span><span class='op'>)</span>

<span class='va'>over</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No       6767
2 Yes      6767</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># over-sampling with random seed, and k = 10</span>
<span class='va'>over10</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"ubOver"</span>, seed <span class='op'>=</span> <span class='fl'>1234L</span>, k <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>

<span class='va'>over10</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No       6767
2 Yes      2330</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># SMOTE with random seed</span>
<span class='va'>smote</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"ubSMOTE"</span>, seed <span class='op'>=</span> <span class='fl'>1234L</span><span class='op'>)</span>

<span class='va'>smote</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No        932
2 Yes       699</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># SMOTE with random seed, and perc.under = 250</span>
<span class='va'>smote250</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"ubSMOTE"</span>, seed <span class='op'>=</span> <span class='fl'>1234L</span>, perc.under <span class='op'>=</span> <span class='fl'>250</span><span class='op'>)</span>

<span class='va'>smote250</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>default</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  default     n
  &lt;fct&gt;   &lt;int&gt;
1 No       1165
2 Yes       699</code></pre>
</div>
<p>The argument that specifies the sampling method in sampling_target () is method. “ubUnder” is under-sampling, and “ubOver” is over-sampling, “ubSMOTE” is SMOTE(Synthetic Minority Over-sampling TEchnique).</p>
<h2 id="modeling-and-evaluate-predict">Modeling and Evaluate, Predict</h2>
<h3 id="data-wisconsin-breast-cancer-data">Data: Wisconsin Breast Cancer Data</h3>
<p><code>BreastCancer</code> of <code>mlbench package</code> is a breast cancer data. The objective is to identify each of a number of benign or malignant classes.</p>
<p>A data frame with 699 observations on 11 variables, one being a character variable, 9 being ordered or nominal, and 1 target class.:</p>
<ul>
<li><code>Id</code> : character. Sample code number</li>
<li><code>Cl.thickness</code> : ordered factor. Clump Thickness</li>
<li><code>Cell.size</code> : ordered factor. Uniformity of Cell Size</li>
<li><code>Cell.shape</code> : ordered factor. Uniformity of Cell Shape</li>
<li><code>Marg.adhesion</code> : ordered factor. Marginal Adhesion</li>
<li><code>Epith.c.size</code> : ordered factor. Single Epithelial Cell Size</li>
<li><code>Bare.nuclei</code> : factor. Bare Nuclei</li>
<li><code>Bl.cromatin</code> : factor. Bland Chromatin</li>
<li><code>Normal.nucleoli</code> : factor. Normal Nucleoli</li>
<li><code>Mitoses</code> : factor. Mitoses</li>
<li><code>Class</code> : factor. Class. level is <code>benign</code> and <code>malignant</code>.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>mlbench</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>BreastCancer</span><span class='op'>)</span>

<span class='co'># class of each variables</span>
<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>BreastCancer</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>             Id    Cl.thickness       Cell.size      Cell.shape 
    &quot;character&quot;       &quot;ordered&quot;       &quot;ordered&quot;       &quot;ordered&quot; 
  Marg.adhesion    Epith.c.size     Bare.nuclei     Bl.cromatin 
      &quot;ordered&quot;       &quot;ordered&quot;        &quot;factor&quot;        &quot;factor&quot; 
Normal.nucleoli         Mitoses           Class 
       &quot;factor&quot;        &quot;factor&quot;        &quot;factor&quot; </code></pre>
</div>
<h3 id="preperation-the-data">Preperation the data</h3>
<p>Perform data preprocessing as follows.:</p>
<ul>
<li>Find and imputate variables that contain missing values.</li>
<li>Split the data into a train set and a test set.</li>
<li>To solve the imbalanced class, perform sampling in the train set of raw data.</li>
<li>Cleansing the dataset for classification modeling.</li>
</ul>
<h4 id="fix-the-missing-value-with-dlookrimputate_na">Fix the missing value with <code>dlookr::imputate_na()</code></h4>
<p>find the variables that include missing value. and imputate the missing value using imputate_na() in dlookr package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/choonghyunryu/dlookr/'>dlookr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='co'># variable that have a missing value</span>
<span class='fu'><a href='https://choonghyunryu.github.io/dlookr/reference/diagnose.data.frame.html'>diagnose</a></span><span class='op'>(</span><span class='va'>BreastCancer</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>missing_count</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 6
  variables   types  missing_count missing_percent unique_count
  &lt;chr&gt;       &lt;chr&gt;          &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 Bare.nuclei factor            16            2.29           11
# … with 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># imputation of missing value</span>
<span class='va'>breastCancer</span> <span class='op'>&lt;-</span> <span class='va'>BreastCancer</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Bare.nuclei <span class='op'>=</span> <span class='fu'><a href='https://choonghyunryu.github.io/dlookr/reference/imputate_na.html'>imputate_na</a></span><span class='op'>(</span><span class='va'>BreastCancer</span>, <span class='va'>Bare.nuclei</span>, <span class='va'>Class</span>,
                         method <span class='op'>=</span> <span class='st'>"mice"</span>, no_attrs <span class='op'>=</span> <span class='cn'>TRUE</span>, print_flag <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="split-data-set">Split data set</h3>
<h4 id="splits-the-dataset-into-a-train-set-and-a-test-set-with-split_by">Splits the dataset into a train set and a test set with <code>split_by()</code></h4>
<p><code>split_by()</code> in the alookr package splits the dataset into a train set and a test set.</p>
<p>The ratio argument of the <code>split_by()</code> function specifies the ratio of the train set.</p>
<p><code>split_by()</code> creates a class object named split_df.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>alookr</span><span class='op'>)</span>

<span class='co'># split the data into a train set and a test set by default arguments</span>
<span class='va'>sb</span> <span class='op'>&lt;-</span> <span class='va'>breastCancer</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/split_by.data.frame.html'>split_by</a></span><span class='op'>(</span>target <span class='op'>=</span> <span class='va'>Class</span><span class='op'>)</span>

<span class='co'># show the class name</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;split_df&quot;   &quot;grouped_df&quot; &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># split the data into a train set and a test set by ratio = 0.6</span>
<span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='va'>breastCancer</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/split_by.data.frame.html'>split_by</a></span><span class='op'>(</span><span class='va'>Class</span>, ratio <span class='op'>=</span> <span class='fl'>0.6</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The <code>summary()</code> function displays the following useful information about the split_df object:</p>
<ul>
<li>random seed : The random seed is the random seed used internally to separate the data</li>
<li>split data : Information of splited data
<ul>
<li>train set count : number of train set</li>
<li>test set count : number of test set</li>
</ul></li>
<li>target variable : Target variable name
<ul>
<li>minority class : name and ratio(In parentheses) of minority class</li>
<li>majority class : name and ratio(In parentheses) of majority class</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># summary() display the some information</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>** Split train/test set information **
 + random seed        :  14818 
 + split data            
    - train set count :  489 
    - test set count  :  210 
 + target variable    :  Class 
    - minority class  :  malignant (0.344778)
    - majority class  :  benign (0.655222)</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># summary() display the some information</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>tmp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>** Split train/test set information **
 + random seed        :  44115 
 + split data            
    - train set count :  419 
    - test set count  :  280 
 + target variable    :  Class 
    - minority class  :  malignant (0.344778)
    - majority class  :  benign (0.655222)</code></pre>
</div>
<h4 id="check-missing-levels-in-the-train-set">Check missing levels in the train set</h4>
<p>In the case of categorical variables, when a train set and a test set are separated, a specific level may be missing from the train set.</p>
<p>In this case, there is no problem when fitting the model, but an error occurs when predicting with the model you created. Therefore, preprocessing is performed to avoid missing data preprocessing.</p>
<p>In the following example, fortunately, there is no categorical variable that contains the missing levels in the train set.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># list of categorical variables in the train set that contain missing levels</span>
<span class='va'>nolevel_in_train</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>variable</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>pull</span>

<span class='va'>nolevel_in_train</span>
</code></pre>
</div>
<pre><code>character(0)</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># if any of the categorical variables in the train set contain a missing level, </span>
<span class='co'># split them again.</span>
<span class='kw'>while</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>nolevel_in_train</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>sb</span> <span class='op'>&lt;-</span> <span class='va'>breastCancer</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/split_by.data.frame.html'>split_by</a></span><span class='op'>(</span><span class='va'>Class</span><span class='op'>)</span>

  <span class='va'>nolevel_in_train</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_target_category.html'>compare_target_category</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>variable</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='va'>pull</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h3 id="handling-the-imbalanced-classes-data-with-sampling_target">Handling the imbalanced classes data with <code>sampling_target()</code></h3>
<h4 id="issue-of-imbalanced-classes-data">Issue of imbalanced classes data</h4>
<p>Imbalanced classes(levels) data means that the number of one level of the frequency of the target variable is relatively small. In general, the proportion of positive classes is relatively small. For example, in the model of predicting spam, the class of interest spam is less than non-spam.</p>
<p>Imbalanced classes data is a common problem in machine learning classification.</p>
<p><code>table()</code> and <code>prop.table()</code> are traditionally useful functions for diagnosing imbalanced classes data. However, alookr’s <code>summary()</code> is simpler and provides more information.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># train set frequency table - imbalanced classes data</span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
   benign malignant 
      458       241 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># train set relative frequency table - imbalanced classes data</span>
<span class='fu'><a href='https://rdrr.io/r/base/proportions.html'>prop.table</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
   benign malignant 
0.6552217 0.3447783 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># using summary function - imbalanced classes data</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>sb</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>** Split train/test set information **
 + random seed        :  14818 
 + split data            
    - train set count :  489 
    - test set count  :  210 
 + target variable    :  Class 
    - minority class  :  malignant (0.344778)
    - majority class  :  benign (0.655222)</code></pre>
</div>
<h4 id="handling-the-imbalanced-classes-data">Handling the imbalanced classes data</h4>
<p>Most machine learning algorithms work best when the number of samples in each class are about equal. And most algorithms are designed to maximize accuracy and reduce error. So, we requre handling an imbalanced class problem.</p>
<p>sampling_target() performs sampling to solve an imbalanced classes data problem.</p>
<h4 id="resampling---oversample-minority-class">Resampling - oversample minority class</h4>
<p>Oversampling can be defined as adding more copies of the minority class.</p>
<p>Oversampling is performed by specifying “ubOver” in the method argument of the <code>sampling_target()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># to balanced by over sampling</span>
<span class='va'>train_over</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"ubOver"</span><span class='op'>)</span>

<span class='co'># frequency table </span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>train_over</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
   benign malignant 
      319       319 </code></pre>
</div>
<h4 id="resampling---undersample-majority-class">Resampling - undersample majority class</h4>
<p>Undersampling can be defined as removing some observations of the majority class.</p>
<p>Undersampling is performed by specifying “ubUnder” in the method argument of the <code>sampling_target()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># to balanced by under sampling</span>
<span class='va'>train_under</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"ubUnder"</span><span class='op'>)</span>

<span class='co'># frequency table </span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>train_under</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
   benign malignant 
      170       170 </code></pre>
</div>
<h4 id="generate-synthetic-samples---smote">Generate synthetic samples - SMOTE</h4>
<p>SMOTE(Synthetic Minority Oversampling Technique) uses a nearest neighbors algorithm to generate new and synthetic data.</p>
<p>SMOTE is performed by specifying “ubSMOTE” in the method argument of the <code>sampling_target()</code> function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># to balanced by SMOTE</span>
<span class='va'>train_smote</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/sampling_target.html'>sampling_target</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>1234L</span>, method <span class='op'>=</span> <span class='st'>"ubSMOTE"</span><span class='op'>)</span>

<span class='co'># frequency table </span>
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>train_smote</span><span class='op'>$</span><span class='va'>Class</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
   benign malignant 
      680       510 </code></pre>
</div>
<h3 id="cleansing-the-dataset-for-classification-modeling-with-cleanse">Cleansing the dataset for classification modeling with <code>cleanse()</code></h3>
<p>The <code>cleanse()</code> cleanse the dataset for classification modeling.</p>
<p>This function is useful when fit the classification model. This function does the following.:</p>
<ul>
<li>Remove the variable with only one value.</li>
<li>And remove variables that have a unique number of values relative to the number of observations for a character or categorical variable.
<ul>
<li>In this case, it is a variable that corresponds to an identifier or an identifier.</li>
</ul></li>
<li>And converts the character to factor.</li>
</ul>
<p>In this example, The <code>cleanse()</code> function removed a variable ID with a high unique rate.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># clean the training set</span>
<span class='va'>train</span> <span class='op'>&lt;-</span> <span class='va'>train_smote</span> <span class='op'>%&gt;%</span>
  <span class='va'>cleanse</span>
</code></pre>
</div>
<pre><code>── Checking unique value ─────────────────────────── unique value is one ──
No variables that unique value is one.

── Checking unique rate ─────────────────────────────── high unique rate ──
• Id = 437(0.367226890756303)

── Checking character variables ─────────────────────── categorical data ──
No character variables.</code></pre>
</div>
<h3 id="extract-test-set-for-evaluation-of-the-model-with-extract_set">Extract test set for evaluation of the model with <code>extract_set()</code></h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># extract test set</span>
<span class='va'>test</span> <span class='op'>&lt;-</span> <span class='va'>sb</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/extract_set.html'>extract_set</a></span><span class='op'>(</span>set <span class='op'>=</span> <span class='st'>"test"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="binary-classification-modeling-with-run_models">Binary classification modeling with <code>run_models()</code></h3>
<p><code>run_models()</code> performs some representative binary classification modeling using <code>split_df</code> object created by <code>split_by()</code>.</p>
<p><code>run_models()</code> executes the process in parallel when fitting the model. However, it is not supported in MS-Windows operating system and RStudio environment.</p>
<p>Currently supported algorithms are as follows.:</p>
<ul>
<li>logistic : logistic regression using <code>stats</code> package</li>
<li>rpart : Recursive Partitioning Trees using <code>rpart</code> package</li>
<li>ctree : Conditional Inference Trees using <code>party</code> package</li>
<li>randomForest :Classification with Random Forest using <code>randomForest</code> package</li>
<li>ranger : A Fast Implementation of Random Forests using <code>ranger</code> package</li>
</ul>
<p><code>run_models()</code> returns a <code>model_df</code> class object.</p>
<p>The <code>model_df</code> class object contains the following variables.:</p>
<ul>
<li>step : character. The current stage in the classification modeling process.
<ul>
<li>For objects created with <code>run_models()</code>, the value of the variable is “1.Fitted”.</li>
</ul></li>
<li>model_id : model identifiers</li>
<li>target : name of target variable</li>
<li>positive : positive class in target variable</li>
<li>fitted_model : list. Fitted model object by model_id’s algorithms</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>result</span> <span class='op'>&lt;-</span> <span class='va'>train</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/run_models.html'>run_models</a></span><span class='op'>(</span>target <span class='op'>=</span> <span class='st'>"Class"</span>, positive <span class='op'>=</span> <span class='st'>"malignant"</span><span class='op'>)</span>
<span class='va'>result</span>
</code></pre>
</div>
<pre><code># A tibble: 7 x 7
  step     model_id    target is_factor positive negative fitted_model
  &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;lgl&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;list&gt;      
1 1.Fitted logistic    Class  TRUE      maligna… benign   &lt;glm&gt;       
2 1.Fitted rpart       Class  TRUE      maligna… benign   &lt;rpart&gt;     
3 1.Fitted ctree       Class  TRUE      maligna… benign   &lt;BinaryTr&gt;  
4 1.Fitted randomFore… Class  TRUE      maligna… benign   &lt;rndmFrs.&gt;  
# … with 3 more rows</code></pre>
</div>
<h3 id="evaluate-the-model">Evaluate the model</h3>
<p>Evaluate the predictive performance of fitted models.</p>
<h4 id="predict-test-set-using-fitted-model-with-run_predict">Predict test set using fitted model with <code>run_predict()</code></h4>
<p><code>run_predict()</code> predict the test set using <code>model_df</code> class fitted by <code>run_models()</code>.</p>
<p><code>run_predict ()</code> is executed in parallel when predicting by model. However, it is not supported in MS-Windows operating system and RStudio environment.</p>
<p>The <code>model_df</code> class object contains the following variables.:</p>
<ul>
<li>step : character. The current stage in the classification modeling process.
<ul>
<li>For objects created with <code>run_predict()</code>, the value of the variable is “2.Predicted”.</li>
</ul></li>
<li>model_id : character. Type of fit model.</li>
<li>target : character. Name of target variable.</li>
<li>positive : character. Level of positive class of binary classification.</li>
<li>fitted_model : list. Fitted model object by model_id’s algorithms.</li>
<li>predicted : result of predcit by each models</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pred</span> <span class='op'>&lt;-</span> <span class='va'>result</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/run_predict.html'>run_predict</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span>
<span class='va'>pred</span>
</code></pre>
</div>
<pre><code># A tibble: 7 x 8
  step      model_id   target is_factor positive negative fitted_model
  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;lgl&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;list&gt;      
1 2.Predic… logistic   Class  TRUE      maligna… benign   &lt;glm&gt;       
2 2.Predic… rpart      Class  TRUE      maligna… benign   &lt;rpart&gt;     
3 2.Predic… ctree      Class  TRUE      maligna… benign   &lt;BinaryTr&gt;  
4 2.Predic… randomFor… Class  TRUE      maligna… benign   &lt;rndmFrs.&gt;  
# … with 3 more rows, and 1 more variable: predicted &lt;list&gt;</code></pre>
</div>
<h4 id="calculate-the-performance-metric-with-run_performance">Calculate the performance metric with <code>run_performance()</code></h4>
<p><code>run_performance()</code> calculate the performance metric of <code>model_df</code> class predicted by <code>run_predict()</code>.</p>
<p><code>run_performance ()</code> is performed in parallel when calculating the performance evaluation index. However, it is not supported in MS-Windows operating system and RStudio environment.</p>
<p>The <code>model_df</code> class object contains the following variables.:</p>
<ul>
<li>step : character. The current stage in the classification modeling process.
<ul>
<li>For objects created with <code>run_performance()</code>, the value of the variable is “3.Performanced”.</li>
</ul></li>
<li>model_id : character. Type of fit model.</li>
<li>target : character. Name of target variable.</li>
<li>positive : character. Level of positive class of binary classification.</li>
<li>fitted_model : list. Fitted model object by model_id’s algorithms</li>
<li>predicted : list. Predicted value by individual model. Each value has a predict_class class object.</li>
<li>performance : list. Calculate metrics by individual model. Each value has a numeric vector.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Calculate performace metrics.</span>
<span class='va'>perf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/run_performance.html'>run_performance</a></span><span class='op'>(</span><span class='va'>pred</span><span class='op'>)</span>
<span class='va'>perf</span>
</code></pre>
</div>
<pre><code># A tibble: 7 x 7
  step    model_id  target positive fitted_model predicted performance
  &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;    &lt;list&gt;       &lt;list&gt;    &lt;list&gt;     
1 3.Perf… logistic  Class  maligna… &lt;glm&gt;        &lt;fct [21… &lt;dbl [15]&gt; 
2 3.Perf… rpart     Class  maligna… &lt;rpart&gt;      &lt;fct [21… &lt;dbl [15]&gt; 
3 3.Perf… ctree     Class  maligna… &lt;BinaryTr&gt;   &lt;fct [21… &lt;dbl [15]&gt; 
4 3.Perf… randomFo… Class  maligna… &lt;rndmFrs.&gt;   &lt;fct [21… &lt;dbl [15]&gt; 
# … with 3 more rows</code></pre>
</div>
<p>The performance variable contains a list object, which contains 15 performance metrics:</p>
<ul>
<li>ZeroOneLoss : Normalized Zero-One Loss(Classification Error Loss).</li>
<li>Accuracy : Accuracy.</li>
<li>Precision : Precision.</li>
<li>Recall : Recall.</li>
<li>Sensitivity : Sensitivity.</li>
<li>Specificity : Specificity.</li>
<li>F1_Score : F1 Score.</li>
<li>Fbeta_Score : F-Beta Score.</li>
<li>LogLoss : Log loss / Cross-Entropy Loss.</li>
<li>AUC : Area Under the Receiver Operating Characteristic Curve (ROC AUC).</li>
<li>Gini : Gini Coefficient.</li>
<li>PRAUC : Area Under the Precision-Recall Curve (PR AUC).</li>
<li>LiftAUC : Area Under the Lift Chart.</li>
<li>GainAUC : Area Under the Gain Chart.</li>
<li>KS_Stat : Kolmogorov-Smirnov Statistic.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Performance by analytics models</span>
<span class='va'>performance</span> <span class='op'>&lt;-</span> <span class='va'>perf</span><span class='op'>$</span><span class='va'>performance</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>performance</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>perf</span><span class='op'>$</span><span class='va'>model_id</span>
<span class='va'>performance</span>
</code></pre>
</div>
<pre><code>$logistic
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.04285714  0.95714286  0.90789474  0.97183099  0.97183099 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.94964029  0.93877551  0.93877551  1.43320622  0.96402878 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.94426994  0.01722128  1.17472123  0.80714286 92.86655183 

$rpart
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.05238095  0.94761905  0.90540541  0.94366197  0.94366197 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.94964029  0.92413793  0.92413793  0.17443373  0.96879116 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.93677171  0.21381856  1.37318550  0.81029510 90.67788023 

$ctree
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.04761905  0.95238095  0.90666667  0.95774648  0.95774648 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.94964029  0.93150685  0.93150685  0.33106801  0.97446550 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.95602391  0.64924384  1.87066074  0.81405097 90.73867666 

$randomForest
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.03333333  0.96666667  0.92105263  0.98591549  0.98591549 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.95683453  0.95238095  0.95238095  0.10045446  0.99234978 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.98459824  0.75554241  1.88370599  0.82588867 95.71385145 

$ranger
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.03333333  0.96666667  0.93243243  0.97183099  0.97183099 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.96402878  0.95172414  0.95172414  0.09562285  0.99260310 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.98520620  0.91071380  2.01842792  0.82605634 95.02482521 

$xgboost
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.02857143  0.97142857  0.92207792  1.00000000  1.00000000 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.95683453  0.95945946  0.95945946  0.10796171  0.98895531 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.97730266  0.93589644  2.07536078  0.82364185 95.68345324 

$lasso
ZeroOneLoss    Accuracy   Precision      Recall Sensitivity 
 0.03333333  0.96666667  0.93243243  0.97183099  0.97183099 
Specificity    F1_Score Fbeta_Score     LogLoss         AUC 
 0.96402878  0.95172414  0.95172414  0.09325757  0.99392036 
       Gini       PRAUC     LiftAUC     GainAUC     KS_Stat 
 0.98784071  0.97152128  2.05577211  0.82692824 95.02482521 </code></pre>
</div>
<p>If you change the list object to tidy format, you’ll see the following at a glance:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Convert to matrix for compare performace.</span>
<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>performance</span>, <span class='st'>"c"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>               logistic       rpart       ctree randomForest
ZeroOneLoss  0.04285714  0.05238095  0.04761905   0.03333333
Accuracy     0.95714286  0.94761905  0.95238095   0.96666667
Precision    0.90789474  0.90540541  0.90666667   0.92105263
Recall       0.97183099  0.94366197  0.95774648   0.98591549
Sensitivity  0.97183099  0.94366197  0.95774648   0.98591549
Specificity  0.94964029  0.94964029  0.94964029   0.95683453
F1_Score     0.93877551  0.92413793  0.93150685   0.95238095
Fbeta_Score  0.93877551  0.92413793  0.93150685   0.95238095
LogLoss      1.43320622  0.17443373  0.33106801   0.10045446
AUC          0.96402878  0.96879116  0.97446550   0.99234978
Gini         0.94426994  0.93677171  0.95602391   0.98459824
PRAUC        0.01722128  0.21381856  0.64924384   0.75554241
LiftAUC      1.17472123  1.37318550  1.87066074   1.88370599
GainAUC      0.80714286  0.81029510  0.81405097   0.82588867
KS_Stat     92.86655183 90.67788023 90.73867666  95.71385145
                 ranger     xgboost       lasso
ZeroOneLoss  0.03333333  0.02857143  0.03333333
Accuracy     0.96666667  0.97142857  0.96666667
Precision    0.93243243  0.92207792  0.93243243
Recall       0.97183099  1.00000000  0.97183099
Sensitivity  0.97183099  1.00000000  0.97183099
Specificity  0.96402878  0.95683453  0.96402878
F1_Score     0.95172414  0.95945946  0.95172414
Fbeta_Score  0.95172414  0.95945946  0.95172414
LogLoss      0.09562285  0.10796171  0.09325757
AUC          0.99260310  0.98895531  0.99392036
Gini         0.98520620  0.97730266  0.98784071
PRAUC        0.91071380  0.93589644  0.97152128
LiftAUC      2.01842792  2.07536078  2.05577211
GainAUC      0.82605634  0.82364185  0.82692824
KS_Stat     95.02482521 95.68345324 95.02482521</code></pre>
</div>
<p><code>compare_performance()</code> return a list object(results of compared model performance). and list has the following components:</p>
<ul>
<li>recommend_model : character. The name of the model that is recommended as the best among the various models.</li>
<li>top_count : numeric. The number of best performing performance metrics by model.</li>
<li>mean_rank : numeric. Average of ranking individual performance metrics by model.</li>
<li>top_metric : list. The name of the performance metric with the best performance on individual performance metrics by model.</li>
</ul>
<p>In this example, <code>compare_performance()</code> recommend the <strong>“ranger”</strong> model.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Compaire the Performance metrics of each model</span>
<span class='va'>comp_perf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/compare_performance.html'>compare_performance</a></span><span class='op'>(</span><span class='va'>pred</span><span class='op'>)</span>
<span class='va'>comp_perf</span>
</code></pre>
</div>
<pre><code>$recommend_model
[1] &quot;lasso&quot;

$top_metric_count
    logistic        rpart        ctree randomForest       ranger 
           0            0            0            1            2 
     xgboost        lasso 
           5            7 

$mean_rank
    logistic        rpart        ctree randomForest       ranger 
    5.846154     6.461538     5.615385     2.961538     2.615385 
     xgboost        lasso 
    2.423077     2.076923 

$top_metric
$top_metric$logistic
NULL

$top_metric$rpart
NULL

$top_metric$ctree
NULL

$top_metric$randomForest
[1] &quot;KS_Stat&quot;

$top_metric$ranger
[1] &quot;Precision&quot;   &quot;Specificity&quot;

$top_metric$xgboost
[1] &quot;ZeroOneLoss&quot; &quot;Accuracy&quot;    &quot;Recall&quot;      &quot;F1_Score&quot;   
[5] &quot;LiftAUC&quot;    

$top_metric$lasso
[1] &quot;Precision&quot;   &quot;Specificity&quot; &quot;LogLoss&quot;     &quot;AUC&quot;        
[5] &quot;Gini&quot;        &quot;PRAUC&quot;       &quot;GainAUC&quot;    </code></pre>
</div>
<h4 id="plot-the-roc-curve-with-plot_performance">Plot the ROC curve with <code>plot_performance()</code></h4>
<p><code>compare_performance()</code> plot ROC curve.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Plot ROC curve</span>
<span class='fu'><a href='https://rdrr.io/pkg/alookr/man/plot_performance.html'>plot_performance</a></span><span class='op'>(</span><span class='va'>pred</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="index_files/figure-html5/ROC-1.png" width="672" /></p>
</div>
<h4 id="tunning-the-cut-off">Tunning the cut-off</h4>
<p>In general, if the prediction probability is greater than 0.5 in the binary classification model, it is predicted as <code>positive class</code>. In other words, 0.5 is used for the cut-off value. This applies to most model algorithms. However, in some cases, the performance can be tuned by changing the cut-off value.</p>
<p><code>plot_cutoff ()</code> visualizes a plot to select the cut-off value, and returns the cut-off value.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pred_best</span> <span class='op'>&lt;-</span> <span class='va'>pred</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>model_id</span> <span class='op'>==</span> <span class='va'>comp_perf</span><span class='op'>$</span><span class='va'>recommend_model</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>predicted</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>pull</span> <span class='op'>%&gt;%</span> 
  <span class='va'>.</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='st'>"pred_prob"</span><span class='op'>)</span>

<span class='va'>cutoff</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/plot_cutoff.html'>plot_cutoff</a></span><span class='op'>(</span><span class='va'>pred_best</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, type <span class='op'>=</span> <span class='st'>"mcc"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="index_files/figure-html5/cutoff-1.png" width="672" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cutoff</span>
</code></pre>
</div>
<pre><code>[1] 0.67</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cutoff2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/plot_cutoff.html'>plot_cutoff</a></span><span class='op'>(</span><span class='va'>pred_best</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, type <span class='op'>=</span> <span class='st'>"density"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="index_files/figure-html5/cutoff-2.png" width="672" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cutoff2</span>
</code></pre>
</div>
<pre><code>[1] 0.6928</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cutoff3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/plot_cutoff.html'>plot_cutoff</a></span><span class='op'>(</span><span class='va'>pred_best</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, type <span class='op'>=</span> <span class='st'>"prob"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="index_files/figure-html5/cutoff-3.png" width="672" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cutoff3</span>
</code></pre>
</div>
<pre><code>[1] 0.67</code></pre>
</div>
<h4 id="performance-comparison-between-prediction-and-tuned-cut-off-with-performance_metric">Performance comparison between prediction and tuned cut-off with <code>performance_metric()</code></h4>
<p>Compare the performance of the original prediction with that of the tuned cut-off. Compare the cut-off with the non-cut model for the model with the best performance <code>comp_perf$recommend_model</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>comp_perf</span><span class='op'>$</span><span class='va'>recommend_model</span>
</code></pre>
</div>
<pre><code>[1] &quot;lasso&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># extract predicted probability</span>
<span class='va'>idx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>pred</span><span class='op'>$</span><span class='va'>model_id</span> <span class='op'>==</span> <span class='va'>comp_perf</span><span class='op'>$</span><span class='va'>recommend_model</span><span class='op'>)</span>
<span class='va'>pred_prob</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>pred</span><span class='op'>$</span><span class='va'>predicted</span><span class='op'>[[</span><span class='va'>idx</span><span class='op'>]</span><span class='op'>]</span>, <span class='st'>"pred_prob"</span><span class='op'>)</span>

<span class='co'># or, extract predicted probability using dplyr</span>
<span class='va'>pred_prob</span> <span class='op'>&lt;-</span> <span class='va'>pred</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>model_id</span> <span class='op'>==</span> <span class='va'>comp_perf</span><span class='op'>$</span><span class='va'>recommend_model</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>predicted</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>pull</span> <span class='op'>%&gt;%</span> 
  <span class='st'>"[["</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='st'>"pred_prob"</span><span class='op'>)</span>

<span class='co'># predicted probability</span>
<span class='va'>pred_prob</span>  
</code></pre>
</div>
<pre><code>  [1] 0.0177546700 0.0189495146 0.0073209366 0.9999504268 0.0039579715
  [6] 0.9759609573 0.0037722474 0.0094413466 0.0013023718 0.9998300604
 [11] 0.6869421814 0.9998437927 0.0050499002 0.9853830303 0.9999959690
 [16] 0.9985322958 0.7361849175 0.0140288334 0.0682727187 0.0078550012
 [21] 0.1095384107 0.9999980415 0.0017374737 0.0755990146 0.9979659465
 [26] 0.9977689915 0.0024806916 0.1080620891 0.9997972486 0.9998449540
 [31] 0.0022109726 0.0021955342 0.9999393703 0.0054353242 0.0061165962
 [36] 0.0020909665 0.0026223736 0.4237392464 0.9999997369 0.5406384477
 [41] 0.0020909665 0.0031319356 0.9983299419 0.9992408490 0.9815634328
 [46] 0.0094413466 0.0074795138 0.9983517936 0.0039579715 0.0031319356
 [51] 0.0141696118 0.9999996480 0.0401139369 0.9998134264 0.9999917474
 [56] 0.9810653114 0.9997727754 0.9889991960 0.6705777033 0.9935469003
 [61] 0.8472658494 0.0074795138 0.9997773947 0.9987562540 0.0388247105
 [66] 0.0031319356 0.0062207276 0.9085271128 0.9939917427 0.7895163765
 [71] 0.9849519886 0.9196712296 0.0426028985 0.9998039298 0.0031319356
 [76] 0.0032162770 0.0008728069 0.0013156114 0.9996734281 0.0062098409
 [81] 0.9057298818 0.9263995279 0.8963795408 0.0016539309 0.9536035605
 [86] 0.9970293842 0.9160360574 0.0008728069 0.9465787759 0.0031319356
 [91] 0.0013511064 0.0008728069 0.9999824436 0.0010416530 0.9290444876
 [96] 0.5564421412 0.9998324636 0.0093933413 0.9915908881 0.9999999440
[101] 0.9999828204 0.0013023718 0.0121131663 0.0013156114 0.0128678209
[106] 0.0008728069 0.0013511064 0.0640210122 0.0181963668 0.0006941589
[111] 0.0029548680 0.0058004220 0.0015602932 0.9999995036 0.0021181708
[116] 0.0013156114 0.1737380284 0.0016539309 0.1388836367 0.0038492779
[121] 0.9999988443 0.0029063415 0.9922099008 0.0032346583 0.0008728069
[126] 0.0050007783 0.0080339252 0.0050007783 0.3913793670 0.0074468436
[131] 0.0082491823 0.0052869014 0.9999791314 0.9986223232 0.0020200395
[136] 0.0039492874 0.0032346583 0.0059867407 0.9979949108 0.0184287353
[141] 0.9999999995 0.9999033596 0.0061032049 0.0008728069 0.0061165962
[146] 0.0061165962 0.0008728069 0.0094413466 0.0031498364 0.9993123673
[151] 0.0032826657 0.0010973809 0.9878714634 0.0032346583 0.0089302538
[156] 0.0039579715 0.0059973997 0.0061165962 0.0145468547 0.0020909665
[161] 0.0061165962 0.0094413466 0.0010746645 0.0016633982 0.1163940612
[166] 0.0025591913 0.0031319356 0.0140979073 0.0016539309 0.9969724915
[171] 0.0020909665 0.9999955230 0.0115430114 0.9883739882 0.9572209234
[176] 0.0061032049 0.9687516430 0.0262744005 0.0086594371 0.0013156114
[181] 0.0061165962 0.9955646856 0.9999412377 0.0008728069 0.0091034557
[186] 0.0061165962 0.0094413466 0.0008728069 0.0034200790 0.0137333220
[191] 0.0008728069 0.9999961243 0.0061165962 0.0074795138 0.0094413466
[196] 0.0008728069 0.0016539309 0.0024669885 0.0065334373 0.0008728069
[201] 0.0048422415 0.0058840711 0.0008728069 0.9999999972 0.6887804967
[206] 0.0014436550 0.0020909665 0.0120277662 0.0033144614 0.9932804070</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># compaire Accuracy</span>
<span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, <span class='st'>"Accuracy"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.9666667</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, <span class='st'>"Accuracy"</span>,
                   cutoff <span class='op'>=</span> <span class='va'>cutoff</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.9761905</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># compaire Confusion Matrix</span>
<span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, <span class='st'>"ConfusionMatrix"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>           actual
predict     benign malignant
  benign       134         2
  malignant      5        69</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, <span class='st'>"ConfusionMatrix"</span>, 
                   cutoff <span class='op'>=</span> <span class='va'>cutoff</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>           actual
predict     benign malignant
  benign       136         2
  malignant      3        69</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># compaire F1 Score</span>
<span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>, <span class='st'>"malignant"</span>, <span class='st'>"F1_Score"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.9517241</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>,  <span class='st'>"malignant"</span>, <span class='st'>"F1_Score"</span>, 
                   cutoff <span class='op'>=</span> <span class='va'>cutoff</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.965035</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/alookr/man/performance_metric.html'>performance_metric</a></span><span class='op'>(</span><span class='va'>pred_prob</span>, <span class='va'>test</span><span class='op'>$</span><span class='va'>Class</span>,  <span class='st'>"malignant"</span>, <span class='st'>"F1_Score"</span>, 
                   cutoff <span class='op'>=</span> <span class='va'>cutoff2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.9571429</code></pre>
</div>
<p>If the performance of the tuned cut-off is good, use it as a cut-off to predict positives.</p>
<h3 id="predict">Predict</h3>
<p>If you have selected a good model from several models, then perform the prediction with that model.</p>
<h4 id="create-data-set-for-predict">Create data set for predict</h4>
<p>Create sample data for predicting by extracting 100 samples from the data set used in the previous under sampling example.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>data_pred</span> <span class='op'>&lt;-</span> <span class='va'>train_under</span> <span class='op'>%&gt;%</span> 
  <span class='va'>cleanse</span> 
</code></pre>
</div>
<pre><code>── Checking unique value ─────────────────────────── unique value is one ──
No variables that unique value is one.

── Checking unique rate ─────────────────────────────── high unique rate ──
• Id = 331(0.973529411764706)

── Checking character variables ─────────────────────── categorical data ──
No character variables.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1234L</span><span class='op'>)</span>
<span class='va'>data_pred</span> <span class='op'>&lt;-</span> <span class='va'>data_pred</span> <span class='op'>%&gt;%</span> 
  <span class='va'>nrow</span> <span class='op'>%&gt;%</span> 
  <span class='va'>seq</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>data_pred</span><span class='op'>[</span><span class='va'>.</span>, <span class='op'>]</span>
</code></pre>
</div>
</div>
<h4 id="predict-with-alookr-and-dplyr">Predict with alookr and dplyr</h4>
<p>Do a predict using the <code>dplyr</code> package. The last <code>factor()</code> function eliminates unnecessary information.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pred_actual</span> <span class='op'>&lt;-</span> <span class='va'>pred</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>model_id</span> <span class='op'>==</span> <span class='va'>comp_perf</span><span class='op'>$</span><span class='va'>recommend_model</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/run_predict.html'>run_predict</a></span><span class='op'>(</span><span class='va'>data_pred</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>predicted</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>pull</span> <span class='op'>%&gt;%</span> 
  <span class='st'>"[["</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>pred_actual</span>
</code></pre>
</div>
<pre><code> [1] benign    benign    benign    malignant malignant benign   
 [7] benign    benign    malignant malignant benign    malignant
[13] benign    benign    malignant malignant benign    benign   
[19] malignant malignant benign    malignant benign    benign   
[25] malignant benign    benign    benign    benign    benign   
[31] malignant benign    benign    malignant benign    benign   
[37] malignant benign    malignant benign    malignant benign   
[43] benign    benign    malignant malignant malignant benign   
[49] benign    benign   
Levels: benign malignant</code></pre>
</div>
<p>If you want to predict by cut-off, specify the <code>cutoff</code> argument in the <code>run_predict()</code> function as follows.:</p>
<p>In the example, there is no difference between the results of using cut-off and not.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pred_actual2</span> <span class='op'>&lt;-</span> <span class='va'>pred</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>model_id</span> <span class='op'>==</span> <span class='va'>comp_perf</span><span class='op'>$</span><span class='va'>recommend_model</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/alookr/man/run_predict.html'>run_predict</a></span><span class='op'>(</span><span class='va'>data_pred</span>, <span class='va'>cutoff</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>predicted</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='va'>pull</span> <span class='op'>%&gt;%</span> 
  <span class='st'>"[["</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>pred_actual2</span>
</code></pre>
</div>
<pre><code> [1] benign    benign    benign    malignant malignant benign   
 [7] benign    benign    malignant malignant benign    malignant
[13] benign    benign    malignant malignant benign    benign   
[19] malignant malignant benign    malignant benign    benign   
[25] malignant benign    benign    benign    benign    benign   
[31] malignant benign    benign    malignant benign    benign   
[37] malignant benign    malignant benign    malignant benign   
[43] benign    benign    malignant malignant malignant benign   
[49] benign    benign   
Levels: benign malignant</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>pred_actual</span> <span class='op'>!=</span> <span class='va'>pred_actual2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<div class="distill-site-nav distill-site-footer">
<!--Created by bitR.
<br>-->
Licensed under the <a href="https://opensource.org/licenses/lgpl-3.0.html" target="_blank">GNU General Public License version 3.0</a>
</div>
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
